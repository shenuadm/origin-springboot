spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://127.0.0.1:5432/origin?serverTimezone=Asia/Shanghai
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:wzw123!@#}
    hikari:
      minimum-idle: 5 # 连接池中最小空闲连接数
      maximum-pool-size: 20 # 连接池中允许的最大连接数
      auto-commit: true # 连接是否自动提交事务
      idle-timeout: 30000 # 30s，连接在连接池中闲置的最长时间，超过这个时间会被释放（单位：毫秒）
      pool-name: Origin-HikariCP # 连接池名
      max-lifetime: 1800000 # 30m，连接在连接池中的最大存活时间，超过这个时间会被强制关闭（单位：毫秒）
      connection-timeout: 30000 # 30s，获取连接的超时时间（单位：毫秒）
      connection-test-query: SELECT 1 # 用于测试连接是否可用的SQL查询语句
  
  # Redis 配置（用于登录限流）
  # 如果 Redis 未启动，请使用 docker run -d --name redis -p 6379:6379 redis:latest 启动
  data:
    redis:
      host: ${REDIS_HOST:127.0.0.1}
      port: ${REDIS_PORT:6379}
      # password: ${REDIS_PASSWORD:wzw123!@#} # 如果 Redis 设置了密码，在此填写
      database: 0
      lettuce:
        pool:
          max-active: 8 # 连接池中最大连接数
          max-wait: -1ms # 获取连接的最大等待时间，单位毫秒
          max-idle: 8 # 连接池中最大空闲连接数
          min-idle: 0 # 连接池中最小空闲连接数
      # 连接超时时间（如果 Redis 不可用，快速失败）
      connect-timeout: 2000ms
      timeout: 2000ms

#=================================================================
# 网关限流配置（开发环境可放宽限制）
#=================================================================
origin:
  gateway:
    enabled: true
    rate-limit:
      enabled: true
      default-limit: 200              # 开发环境放宽到 200/s
      time-window: 1
      path-limits:
        /api/user/login: 20           # 开发环境 20/s
        /api/user/register: 20

#=================================================================
# minio
#=================================================================
minio:
  endpoint: ${MINIO_ENDPOINT:http://127.0.0.1:9000}
  accessKey: ${MINIO_ACCESS_KEY:minioAdmin}
  secretKey: ${MINIO_SECRET_KEY:wzw123!@#}
  bucketName: origin
