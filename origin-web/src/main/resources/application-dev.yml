spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://127.0.0.1:5432/origin?serverTimezone=Asia/Shanghai
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:wzw123!@#}
    hikari:
      minimum-idle: 5 # 连接池中最小空闲连接数
      maximum-pool-size: 20 # 连接池中允许的最大连接数
      auto-commit: true # 连接是否自动提交事务
      idle-timeout: 30000 # 30s，连接在连接池中闲置的最长时间，超过这个时间会被释放（单位：毫秒）
      pool-name: Origin-HikariCP # 连接池名
      max-lifetime: 1800000 # 30m，连接在连接池中的最大存活时间，超过这个时间会被强制关闭（单位：毫秒）
      connection-timeout: 30000 # 30s，获取连接的超时时间（单位：毫秒）
      connection-test-query: SELECT 1 # 用于测试连接是否可用的SQL查询语句
  
  # Redis 配置（用于登录限流）
  # 如果 Redis 未启动，请使用 docker run -d --name redis -p 6379:6379 redis:latest 启动
  data:
    redis:
      database: 0 # Redis 数据库索引（默认为 0）
      host: ${REDIS_HOST:127.0.0.1} # Redis 服务器地址
      port: ${REDIS_PORT:6379} # Redis 服务器连接端口
      # password: ${REDIS_PASSWORD:wzw123!@#} # Redis 服务器连接密码（默认为空）
      timeout: 5s # 读超时时间
      connect-timeout: 5s # 链接超时时间
      lettuce:
        pool:
          max-active: 200 # 连接池最大连接数
          max-wait: -1ms # 连接池最大阻塞等待时间（使用负值表示没有限制）
          min-idle: 0 # 连接池中的最小空闲连接
          max-idle: 10 # 连接池中的最大空闲连接

#=================================================================
# 网关限流配置（开发环境可放宽限制）
#=================================================================
origin:
  gateway:
    enabled: true
    rate-limit:
      enabled: false
      default-limit: 200              # 开发环境放宽到 200/s
      time-window: 1
      # path-limits:
        # /login: 20                # 登录接口限流 20/s
        # /register: 20             # 注册接口限流 20/s

#=================================================================
# minio
#=================================================================
minio:
  endpoint: ${MINIO_ENDPOINT:http://127.0.0.1:9000}
  accessKey: ${MINIO_ACCESS_KEY:minioAdmin}
  secretKey: ${MINIO_SECRET_KEY:wzw123!@#}
  bucketName: origin
